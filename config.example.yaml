# Coddy Bot Configuration Example
# Copy this file to config.yaml and fill in your values

bot:
  name: "Coddy Bot"
  email: "bot@coddy.dev"
  git_platform: "github"  # github, gitlab, bitbucket
  repository: "owner/repo"
  default_branch: "main"   # used for git pull on PR merge and for PR base
  workspace: "./workspace"  # Workspace: path to repo root (sources + .coddy/ with issues and PRs); env BOT_WORKSPACE
  webhook_secret: "your-webhook-secret-here"
  ai_agent: "cursor_cli"
  # github_username: "coddy-bot"  # Bot GitHub username (to detect own comments; required for issue_comment and assigned)

# GitHub Configuration
github:
  token: "${GITHUB_TOKEN}"  # Use environment variable
  api_url: "https://api.github.com"
  webhook_path: "/webhook/github"

# GitLab Configuration (optional)
gitlab:
  token: "${GITLAB_TOKEN}"
  api_url: "https://gitlab.com/api/v4"
  webhook_path: "/webhook/gitlab"

# BitBucket Configuration (optional)
bitbucket:
  token: "${BITBUCKET_TOKEN}"
  api_url: "https://api.bitbucket.org/2.0"
  webhook_path: "/webhook/bitbucket"

# AI Agent Configuration (Cursor CLI: cursor.com/cli, cursor.com/docs/cli/headless)
# Headless: agent -p --force "prompt". Task/report in .coddy/ (gitignored).
# If agent finds task unclear, it appends "## Agent clarification request" to task file; Coddy posts it to the issue.
ai_agents:
  cursor_cli:
    command: "agent"
    args: ["generate"]
    timeout: 300
    model: "auto"
    mode: "agent"   # agent (default), plan, or ask
    # token: CURSOR_AGENT_TOKEN or CURSOR_AGENT_TOKEN_FILE; or CURSOR_API_KEY for headless CLI
    # output_format: "text"   # default; or "json", "stream-json"
    # stream_partial_output: false   # true only with output_format: "stream-json"

# Webhook Server Configuration (required; all events come from webhooks)
webhook:
  host: "0.0.0.0"
  port: 8000
  debug: false
  enabled: true

# Logging Configuration (optional)
logging:
  level: "INFO"  # DEBUG, INFO (default), WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
